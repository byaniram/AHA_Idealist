<!DOCTYPE html>
<html>
<head>
  <title>CSV Downloader</title>
  <script>
    function downloadCSV() {
      const inputString = document.getElementById('inputString').value;
      const apiUrl = 'https://uat.elastic.snaplogic.com/api/1/rest/slsched/feed/QA/RB_Temp_Space/AHA_Report_Final_/AHA_Parent_Task.csv?Org_email=' + encodeURIComponent(inputString); // Replace with your actual API endpoint
      const authToken = 'QbdNZoeh8H7NV0khklwo5VEkgey72GYP'; // Replace with your actual Bearer Token

      // Display loading message
      document.getElementById('status').textContent = 'Loading...';

      fetch(apiUrl, {
        method: 'GET',
        headers: {
          'Authorization': 'Bearer ' + authToken
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.blob();
      })
      .then(blob => {
        // Create a temporary URL for the blob
        const url = window.URL.createObjectURL(blob);

        // Create a link element and click it to trigger download
        const link = document.createElement('a');
        link.href = url;
        link.setAttribute('download', 'data.csv'); // Set the download filename
        document.body.appendChild(link);
        link.click();

        // Clean up
        document.body.removeChild(link);
        window.URL.revokeObjectURL(url);

        // Display success message
        document.getElementById('status').textContent = 'Download complete!';
      })
      .catch(error => {
        // Display error message
        document.getElementById('status').textContent = 'Error: ' + error.message;
      });
    }
  </script>
</head>
<body>
  <h1>CSV Downloader</h1>
  <p>Enter your string:</p>
  <input type="text" id="inputString">
  <button onclick="downloadCSV()">Download CSV</button>
  <p id="status"></p>
</body>
</html>
